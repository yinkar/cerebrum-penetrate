(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}})();class u{constructor(){this.tape=[],this.head=0,this.code="",this.maxBlocks=3e4,this.operators="<>+-[].,",this.codePointer=0,this.addressStack=[],this.output="",this.outputElement={},this.resetTape()}load(t){this.code=t,this.trimCode()}run(){let t=!1;this.resetAll();const o={"<":()=>{this.prev()},">":()=>{this.next()},"+":()=>{this.inc()},"-":()=>{this.dec()},"[":()=>{if(this.tape[this.head])this.addressStack.push(this.codePointer);else{let s=0;for(;this.codePointer++,!!this.code[this.codePointer];)if(this.code[this.codePointer]==="[")s++;else if(this.code[this.codePointer]==="]")if(s>0)s--;else break}},"]":()=>{this.codePointer=this.addressStack.pop()-1},".":()=>{this.toOutput()},",":()=>{this.input()}};for(;!t;)this.code[this.codePointer]===void 0?t=!0:o[this.code[this.codePointer]](),this.codePointer++}trimCode(){this.code=this.code.split("").filter(t=>this.operators.split("").includes(t)).join("")}next(){this.head=Math.min(this.maxBlocks,this.head+1)}prev(){this.head=Math.max(0,this.head-1)}inc(){this.tape[this.head]=Math.min(255,this.tape[this.head]+1)}dec(){this.tape[this.head]=Math.max(0,this.tape[this.head]-1)}out(){return this.getChar()}toOutput(){this.output+=this.out()}input(){let t=prompt("Input");t.length>0&&this.setChar(t)}log(){console.log(this.output)}print(){this.outputElement.value!==void 0?this.outputElement.value=this.output.replaceAll(`
`,"<br />"):this.outputElement.innerHTML=this.output.replaceAll(`
`,"<br />")}getValue(){return this.tape[this.head]}setValue(t){t>=0&&t<=255&&(this.tape[this.head]=t)}getChar(){return String.fromCharCode(this.tape[this.head])}setChar(t){this.setValue(t.charCodeAt())}resetTape(){this.tape=Array(this.maxBlocks).fill(0)}resetAll(){this.resetTape(),this.head=0,this.codePointer=0,this.addressStack=[],this.output=""}setOutputElement(t){this.outputElement=document.querySelector(t)}getOutputElement(){return this.outputElement}}const r=new u;r.setOutputElement(".output");document.querySelector(".interprete").addEventListener("click",()=>{r.load(document.querySelector("#input").value),r.run(),r.print()});
